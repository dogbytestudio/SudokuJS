<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<style>
input { width: 30px; }
</style>
<body>

<table border=0>
<tr>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="2"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="9"/></td>
</tr>
<tr>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="4"/></td>
<td><input type="textbox" value="6"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
</tr>
<tr>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="1"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="8"/></td>
<td><input type="textbox" value=""/></td>
</tr>
<tr>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="2"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="9"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="7"/></td>
<td><input type="textbox" value=""/></td>
</tr>
<tr>
<td><input type="textbox" value="4"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="6"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
</tr>
<tr>
<td><input type="textbox" value="7"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="4"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
</tr>
<tr>
<td><input type="textbox" value="6"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="7"/></td>
<td><input type="textbox" value="2"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="5"/></td>
<td><input type="textbox" value=""/></td>
</tr>
<tr>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="9"/></td>
<td><input type="textbox" value="5"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="8"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="1"/></td>
<td><input type="textbox" value="2"/></td>
<td><input type="textbox" value=""/></td>
</tr>
<tr>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="7"/></td>
<td><input type="textbox" value="1"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value="9"/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
<td><input type="textbox" value=""/></td>
</tr>
</table>
<button class="btn-solve">Solve</button>
</body>
<script>
"use strict";
$(".btn-solve").click(function(e) {
	var button = $(this);
	var grid = [];
	$("input").each(function(i,item) {
		grid[i] = $(item).val();
	});
	var result = solveGrid(grid);

	if(result===null)
		alert("Puzzle unsolvable");
	else
		populateGrid(result);
});
function populateGrid(grid)
{
	$("input").each(function(i,item) {
		$(item).val(grid[i]);
	});
}
function getRowByIndex(index)
{
return Math.floor(index / 9);
}
function getColByIndex(index)
{
return index % 9;
}
function getIndexByRowCol(row,col)
{
	return row*9 + col;
}

function getRowDensityAt(grid,row)
{
	var sum = 0;
	for(var y=0;y<9;++y)
		if( getGridValueAt(grid,row,y) != "" )
			++sum;
	return sum;
}
function getColumnDensityAt(grid,col)
{
	var sum = 0;
	for(var x=0;x<9;++x)
		if( getGridValueAt(grid,x,col) != "" )
			++sum;
	return sum;
}
function getSquareDensityAt(grid,row,col)
{
	var indexes = getBoxIndexesAt(row,col);
	var sum = 0;
	for(var i=0, len=indexes.length; i<len; ++i)
		if( getGridValueByIndexAt(grid,i)!="" )
			++sum;
	return sum;
}
function getDensityAt(grid,index)
{
	var row = getRowByIndex(index);
	var col = getColByIndex(index);
	var sum =0;
	for(var y=0;y<9;++y)
	{
		var v = getGridValueAt(grid,row,y);
		var v2 = getGridValueAt(grid,y,col);
		if(v!="") sum++;
		if(v2!="") sum++;
	}
	$.each(getBoxIndexesAt(row,col), function(i,item) {
		var v = getGridValueByIndexAt(grid,item);
		if(v!="") sum++;
	});
	return sum;
}
function findBestFreeCell(grid)
{
	var last_density = -1;
	var last_index = -1;
	var row_density = [];
	var col_density = [];
	var square_density = [];
	for(var i=0;i<9;++i)
	{
		row_density[i] = getRowDensityAt(grid,i);
		col_density[i] = getColumnDensityAt(grid,i);
	}

	for(var x=0;x<9;++x)
	{
		for(var y=0;y<9;++y)
		{
			var index = getIndexByRowCol(x,y);
			var value = getGridValueByIndexAt(grid,index);
			if(value!="") continue;
			
			if(row_density[x]>8) return index;
			else if(col_density[y]>8) return index;
			
			var square_density = getSquareDensityAt(grid,x,y);
			if(square_density>8) return index;
			
			var density = row_density[x] + col_density[y] + square_density;
			if(density > last_density)
			{
				last_density = density;
				last_index = index;
			}
			
		}
	}

	if(last_index > -1) return last_index;
	return false;
}
function solveGrid(grid)
{
	var next = findBestFreeCell(grid);
	if(next !== false )
	{
		var row = getRowByIndex(next);
		var col = getColByIndex(next);
		var values = getPossibleValueAt(grid,row,col);
		if(values.length == 0)
			return null;

		var clone= grid.concat([]);
		var return_grid = null;

		for(var i=0;i<values.length;++i)
		{
			clone[next] = values[i];
			return_grid = solveGrid(clone);
			if(return_grid!==null) return return_grid;
		}
		return null;
	}
	return grid;
}

function getGridValueAt(grid,row,col)
{
	var index = getIndexByRowCol(row,col);
	return grid[index];
}
function getGridValueByIndexAt(grid,index)
{
	return grid[index];
}
function getBoxIndexesAt(row,col)
{
	var yCord = Math.floor(row / 3)*3;
	var xCord = Math.floor(col / 3)*3;

	var results = [];
	for(var x=0;x<3;++x)
		for(var y=0;y<3;++y)
			results.push(getIndexByRowCol(yCord+x,xCord+y));
	return results;
}
function getPossibleValueAt(grid,row,col)
{
	var possible = ['1','2','3','4','5','6','7','8','9'];
	for(var y=0;y<9;++y)
	{
		var v = getGridValueAt(grid,row,y);
		var v2 = getGridValueAt(grid,y,col);
		if(v!="" && possible.indexOf(v) > -1)
			possible.splice(possible.indexOf(v), 1);
		if(v2!="" && possible.indexOf(v2) > -1)
			possible.splice(possible.indexOf(v2), 1);
	}
	$.each(getBoxIndexesAt(row,col), function(i,item) {
		var v = getGridValueByIndexAt(grid,item);
		if(v!="" && possible.indexOf(v) > -1)
			possible.splice(possible.indexOf(v), 1);
	});
	return possible;
}
</script>
</html>